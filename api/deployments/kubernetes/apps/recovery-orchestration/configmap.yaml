apiVersion: v1
kind: ConfigMap
metadata:
  name: recovery-orchestration-config
  namespace: lexure
  labels:
    app.kubernetes.io/name: recovery-orchestration
    app.kubernetes.io/component: backend
    app.kubernetes.io/part-of: payment-watchdog
data:
  config.yaml: |
    server:
      port: 8086
      environment: production
      logLevel: info
      shutdownTimeout: 30s
      
    database:
      host: lexure-postgres.lexure.svc.cluster.local
      port: 5432
      name: recovery_orchestration
      sslMode: require
      maxIdleConns: 10
      maxOpenConns: 100
      connMaxLifetime: 1h
      
    redis:
      addr: lexure-redis.lexure.svc.cluster.local:6379
      db: 0
      poolSize: 100
      
    workflow:
      maxConcurrentWorkflows: 100
      maxRetryAttempts: 3
      retryDelay: 5m
      
    observability:
      metrics:
        enabled: true
        path: /metrics
      tracing:
        enabled: true
        sampleRate: 1.0
        exporter: otlp
      
    providers:
      stripe:
        apiVersion: 2020-08-27
        timeout: 30s
      xero:
        apiVersion: 2.0
        timeout: 30s
      quickbooks:
        apiVersion: 6.0
        timeout: 30s
      
    notifications:
      email:
        enabled: true
        from: no-reply@payment-watchdog.com
        retryAttempts: 3
      sms:
        enabled: true
        from: PAYMENT_WATCHDOG
        retryAttempts: 3
